<?php
/**
 * Created by PhpStorm.
 * User: beatrixducz
 * Date: 18/10/2018
 * Time: 16:16
 */

namespace App\Services\OpenWeatherMap;

use App\Services\Contracts\OpenWeatherMap\OpenWeatherMapServiceInterface;
use GuzzleHttp\Client;
use stdClass;

class OpenWeatherMapService implements OpenWeatherMapServiceInterface
{
	protected $client = null;

	protected function getClient()
	{
		if ($this->client) {
			return $this->client;
		}

		$this->client = new Client(['base_uri' =>'api.openweathermap.org/data/2.5/']);
		return $this->client;
	}
	
	public function getData(): stdClass
	{
		$res = $this->getClient()->request('GET','weather?q=London,uk&appid=20bd68f237e77f0066fb3d8937df5e34'  );
		echo '<pre>'; var_dump($this->client->request('GET','/weather')); echo '</pre>'; die;
		return json_decode($res->getBody());
	}
}
