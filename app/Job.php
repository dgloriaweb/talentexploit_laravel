<?php

namespace App;

use Illuminate\Database\Eloquent\Model;
use Ramsey\Uuid\Provider\Node\StaticNodeProvider;

class Job extends Model
{
    /**
     * A job has many licenses
     */
    public function job_drivers_license()
    {
        return $this->hasMany('App\JobDriversLicense');
    }
    public static function getjobById($job_id)
    {
        return Job::where('id', $job_id)->first();
    }
    public static function getFlatJobWorkprefsById($job_id)
    {
        $existingJob = Job::getJobById($job_id);
        if ($existingJob) {
            //setup this->workprefs array with the real user data
            $workprefs_array = [
                'workplace' => $existingJob->workplace,
                'remote' => $existingJob->remote,
                'workdays' => $existingJob->workdays,
                'saturday' => $existingJob->saturday,
                'sunday' => $existingJob->sunday,
                'bank_holidays' => $existingJob->bank_holidays,
                'sat_sun_bh_only' => $existingJob->sat_sun_bh_only,
                'normal_hours' => $existingJob->normal_hours,
                'nightshift' => $existingJob->nightshift,
                'nightshift_only' => $existingJob->nightshift_only,
                'other_shift' => $existingJob->other_shift,
                'other_shift_only' => $existingJob->other_shift_only,
                'overtime' => $existingJob->Overtime
            ];
            return $workprefs_array;
        }
    }
}
