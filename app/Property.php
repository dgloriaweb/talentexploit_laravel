<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Property extends Model
{
    protected $table = 'properties';
    protected $primaryKey = 'property_id';

    /**
     * A property belongs to one person
     */
    public function person()
    {
        return $this->belongsTo('App\Person');
    }

    /**
     * A property belongs to one drivers license
     */
    public function drivers_license()
    {
        return $this->belongsTo('App\Driver','prop_link_id','id');
    }

    public static function getDriversLicense($person_id)
    {
        return Property::with('drivers_license')->where('id', $person_id)
            ->where('prop_link_type', 'drivers_license')
            ->get();
    }
}
