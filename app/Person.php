<?php

namespace App;

use Illuminate\Database\Eloquent\Model;


//tablename = people
//foreign key: people_id
class Person extends Model
{
    protected $fillable = ['username', 'password'];


    public static function getPersonById($person_id)    
    {
        return Person::where('person_id', $person_id)->first();
    }

    public static function getWorkprefs ($person_id)
    {
         $existingUser = Person::getPersonById($person_id);
        if ($existingUser) {
            //setup this->workprefs array with the real user data
            $workprefs_array = [
                'workprefs_array' => [
                    'location' => [
                        'workplace' => $existingUser->workplace,
                        'remote' => $existingUser->remote,
                    ],
                    'days' => [
                        'workdays' => $existingUser->workdays,
                        'saturday' => $existingUser->saturday,
                        'sunday' => $existingUser->sunday,
                        'bank_holidays' => $existingUser->bank_holidays,
                        'sat_sun_bh_only' => $existingUser->sat_sun_bh_only,
                    ],
                    'hours' => [
                        'normal_hours' => $existingUser->normal_hours,
                        'nightshift' => $existingUser->nightshift,
                        'nightshift_only' => $existingUser->nightshift_only,
                        'other_shift' => $existingUser->other_shift,
                        'other_shift_only' => $existingUser->other_shift_only,
                    ],
                    'overtime' => [
                        'overtime' => $existingUser->Overtime
                    ]
                ]
            ];
            return $workprefs_array;
        }
    }
}
