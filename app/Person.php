<?php

namespace App;

use Illuminate\Database\Eloquent\Model;


//tablename = people
//foreign key: people_id
class Person extends Model
{
    protected $fillable = ['username', 'password'];

    /*** relationships */

    /* A person has many properties     */
    public function property()
    {
        return $this->hasMany('App\Property');
    }


    //*** functions */
    public static function getPersonById($person_id)
    {
        return Person::where('id', $person_id)->first();
    }


    public static function storeWorkPrefChanges($person_id, $array)
    {
        //setup this->workprefs array with the real user data
        Person::where('id', $person_id)
            ->update([
                'workplace' => $array['workplace'],
                'remote' => $array['remote'],
                'workdays' => $array['workdays'],
                'saturday' => $array['saturday'],
                'sunday' => $array['sunday'],
                'bank_holidays' => $array['bank_holidays'],
                'sat_sun_bh_only' => $array['sat_sun_bh_only'],
                'normal_hours' => $array['normal_hours'],
                'nightshift' => $array['nightshift'],
                'nightshift_only' => $array['nightshift_only'],
                'other_shift' => $array['other_shift'],
                'other_shift_only' => $array['other_shift_only'],
                'overtime' => $array['overtime']
            ]);

        //success
        return true;
    }
}
